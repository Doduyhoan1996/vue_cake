(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bb09fb2"],{"223d":function(t,a,e){"use strict";var n="/api/users/auth",s="/api/users/check-session",i="/api/users/get-list",c="/api/users/get-option",o="/api/users/register",r="/api/users/update",l="/api/users/get",u="/api/users/change-password",d="/api/users/get-my-dashboard";a["a"]={auth:function(t,a,e,s){t.post(n,a).then(function(t){var a=t.data;e(a)}).catch(function(t){s(t)})},checkSession:function(t,a,e){t.get(s).then(function(t){var e=t.data;a(e)}).catch(function(t){e(t)})},getList:function(t,a,e,n){var s={params:a};t.get(i,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},register:function(t,a,e,n){t.post(o,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},update:function(t,a,e,n){t.post(r,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},changePassword:function(t,a,e,n){t.post(u,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},get:function(t,a,e,n){var s={params:a};t.get(l,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getOption:function(t,a,e,n){t.get(c,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getMyDashboard:function(t,a,e,n){t.get(d,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})}}},"64d7":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"pcm-attendance-view"}},[e("div",{staticClass:"container-fluid"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12"},[e("div",{staticClass:"card mb-4 border-left-primary"},[e("div",{staticClass:"card-body"},[e("h6",{staticClass:"font-weight-bold"},[t._v("Điều kiện lọc")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2 form-group"},[e("el-date-picker",{staticClass:"w-100",attrs:{type:"month",placeholder:"Chọn tháng",format:"MM/yyyy","value-format":"yyyy-MM",clearable:!1,"picker-options":t.pickerOptions},on:{change:function(a){return t.loadData()}},model:{value:t.form.filter.date,callback:function(a){t.$set(t.form.filter,"date",a)},expression:"form.filter.date"}})],1),t.$acl.check("isAdmin")?e("div",{staticClass:"col-md-10 form-group"},[e("el-select",{attrs:{placeholder:"Nhân sự",filterable:"",clearable:""},on:{change:function(a){return t.loadData()}},model:{value:t.form.filter.user_id,callback:function(a){t.$set(t.form.filter,"user_id",a)},expression:"form.filter.user_id"}},t._l(t.form.option.users,function(a){return e("el-option",{key:a.id,attrs:{label:a.full_name,value:a.id}},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"pr-2"},[e("avatar",{attrs:{username:a.first_name+" "+a.last_name,size:30}})],1),e("div",{staticClass:"w-100"},[e("span",{staticClass:"font-weight-bold"},[t._v("\n                                                    "+t._s(a.full_name)+" \n                                                ")]),e("span",{staticClass:"float-right"},[t._v(t._s(a.email))])])])])}),1)],1):t._e()])])])]),e("div",{staticClass:"col-xl-12"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState.list,expression:"loadingState.list"}],staticClass:"card shadow mb-4"},[t._m(1),e("div",{staticClass:"card-body text-center"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.attendances}},[e("el-table-column",{attrs:{label:"Ngày chấm"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"badge badge-heading",class:{"badge-success":0==a.row.type,"badge-primary":-1==a.row.type," badge-warning":a.row.type>=1&&a.row.type<=3,"badge-danger":0==a.row.id},staticStyle:{"font-size":"100%"}},[t._v("\n\n                                        "+t._s(t._f("formatDate")(a.row.check_date,"ddd, DD/MM"))+"\n\n                                    ")])]}}])}),e("el-table-column",{attrs:{label:"Giờ vào"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"font-weight-bold",class:{"text-danger":1==a.row.type||3==a.row.type}},[t._v(t._s(t._f("formatDate")(a.row.check_in,"HH:mm")))]),e("br"),e("span",{staticClass:"small"},[t._v(t._s(a.row.reason_late))])]}}])}),e("el-table-column",{attrs:{label:"Giờ ra"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"font-weight-bold",class:{"text-danger":2==a.row.type||3==a.row.type}},[t._v(t._s(t._f("formatCheckOut")(a.row.check_out,a.row.check_date)))]),e("br"),e("span",{staticClass:"small"},[t._v(t._s(a.row.reason_soon))])]}}])}),e("el-table-column",{attrs:{label:"Công số"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(parseFloat(a.row.work_rate)||0))])]}}])}),e("el-table-column",{attrs:{label:"#",fixed:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.id>0&&0==a.row.type&&1==a.row.status?e("i",{staticClass:"fas fa-check-circle fa-lg fa-fw text-success"}):t._e(),a.row.id>0&&a.row.type>0&&1==a.row.status?e("i",{staticClass:"fas fa-check-circle fa-lg fa-fw text-warning"}):t._e(),a.row.id>0&&0==a.row.status?e("span",[t.$acl.check("isAdmin")?e("button",{staticClass:"btn btn-info btn-sm",on:{click:function(e){return t.confirmRequest(a.row)}}},[t._v("Xác nhận")]):e("i",{staticClass:"far fa-hourglass fa-lg fa-fw"})]):t._e(),0==a.row.id||-1==a.row.type?e("span",[a.row.user_id==t.$store.state.app_user.user.id?e("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(e){return t.request(a.row)}}},[t._v("Yêu cầu")]):e("span",[t._v("--")])]):t._e(),e("br"),e("span",{staticClass:"small"},[t._v(t._s(a.row.note))])]}}])})],1)],1)])])])]),e("att-request",{attrs:{"dialog-visible":t.dialogVisible.attendance,"init-data":t.attendanceRequestData},on:{closeDialog:function(a){t.dialogVisible.attendance=!1},success:t.successAttendanceRequest}})],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-sm-flex align-items-center justify-content-between mb-4"},[e("h1",{staticClass:"h3 mb-0 text-gray-800"},[t._v("Tiện ích: Chấm công")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Danh sách chấm công")])])}],i=e("223d"),c=e("730a"),o=e("7bee"),r=e("c1df"),l=e.n(r),u={name:"pcm-attendance-view",components:{"att-request":function(){return e.e("chunk-1f196d7c").then(e.bind(null,"c91e"))},avatar:function(){return e.e("chunk-2d0cb764").then(e.t.bind(null,"4a89",7))}},data:function(){return{loadingState:{user:!1,list:!1},dialogVisible:{attendance:!1},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},UserModel:o["a"],form:{filter:{user_id:this.$store.state.app_user.user.id,date:l()().format("YYYY-MM")},option:{users:[]}},attendances:[],attendanceRequestData:{}}},created:function(){var t=this;this.$emit("activeMenu","my_attendance"),t.loadData(),t.loadOption()},methods:{loadOption:function(){var t=this;t.loadingState.filter=!0,i["a"].getOption(t.$axios,{},function(a){t.loadingState.filter=!1,a.status&&(t.form.option.users=a.data)},function(t){})},loadData:function(){var t=this;t.loadingState.list=!0,c["a"].getList(t.$axios,t.form.filter,function(a){t.loadingState.list=!1,a.status&&(t.attendances=a.data)},function(a){t.loadingState.list=!1})},request:function(t){t.id,this.attendanceRequestData=t,this.dialogVisible.attendance=!0},confirmRequest:function(t){var a=this,e="<b>Lý do</b>: "+t.note;this.showConfirmLoadingMessage("warning","Xác nhận chấm công",e,function(e,n,s){if("confirm"===e){n.confirmButtonLoading=!0;var i={id:t.id};c["a"].confirmRequest(a.$axios,i,function(t){n.confirmButtonLoading=!1,t.status&&(a.showMessage("success","Xác nhận thành công !"),s(),a.loadData())},function(t){n.confirmButtonLoading=!1})}else s()})},successAttendanceRequest:function(t){this.loadData(),this.dialogVisible.attendance=!1}}},d=u,f=e("2877"),h=Object(f["a"])(d,n,s,!1,null,null,null);a["default"]=h.exports},"730a":function(t,a,e){"use strict";var n="/api/attendances/get-state",s="/api/attendances/check-in",i="/api/attendances/check-out",c="/api/attendances/send-request",o="/api/attendances/get-list",r="/api/attendances/get-report",l="/api/attendances/confirm-request",u={getState:function(t,a,e){t.get(n).then(function(t){var e=t.data;a(e)}).catch(function(t){e(t)})},checkIn:function(t,a,e,n){t.post(s,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},checkOut:function(t,a,e,n){t.post(i,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},sendRequest:function(t,a,e,n){t.post(c,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},confirmRequest:function(t,a,e,n){t.post(l,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getList:function(t,a,e,n){var s={params:a};t.get(o,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getReport:function(t,a,e,n){var s={params:a};t.get(r,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})}};a["a"]=u},"7bee":function(t,a,e){"use strict";a["a"]={gender:{MALE:1,FEMALE:2},role:{ADMIN:1,HR:2,USER:9},getOptionRole:function(){return[{key:this.role.ADMIN,value:"Quản trị"},{key:this.role.HR,value:"Hành chính"},{key:this.role.USER,value:"Thành viên"}]},type:{OFFICIAL:1,TRAINEE:9},getOptionType:function(){return[{key:this.type.OFFICIAL,value:"Chính thức"},{key:this.type.TRAINEE,value:"Thực tập"}]},status:{ACTIVE:1,BLOCK:0}}}}]);
//# sourceMappingURL=chunk-3bb09fb2.b3b53d66.js.map