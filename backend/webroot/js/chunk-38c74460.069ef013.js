(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38c74460"],{"223d":function(t,a,e){"use strict";var n="/api/users/auth",s="/api/users/check-session",i="/api/users/get-list",c="/api/users/get-option",o="/api/users/register",r="/api/users/update",d="/api/users/get",u="/api/users/change-password",l="/api/users/get-my-dashboard";a["a"]={auth:function(t,a,e,s){t.post(n,a).then(function(t){var a=t.data;e(a)}).catch(function(t){s(t)})},checkSession:function(t,a,e){t.get(s).then(function(t){var e=t.data;a(e)}).catch(function(t){e(t)})},getList:function(t,a,e,n){var s={params:a};t.get(i,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},register:function(t,a,e,n){t.post(o,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},update:function(t,a,e,n){t.post(r,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},changePassword:function(t,a,e,n){t.post(u,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},get:function(t,a,e,n){var s={params:a};t.get(d,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getOption:function(t,a,e,n){t.get(c,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getMyDashboard:function(t,a,e,n){t.get(l,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})}}},"24ee":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"pcm-dashboard-view"}},[e("div",{staticClass:"container-fluid"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-md-6 mb-4"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState.dashboard,expression:"loadingState.dashboard"}],staticClass:"card border-left-primary shadow h-100 py-2"},[t._m(1)])]),e("div",{staticClass:"col-xl-3 col-md-6 mb-4"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState.dashboard,expression:"loadingState.dashboard"}],staticClass:"card border-left-info shadow h-100 py-2"},[t._m(2)])]),e("div",{staticClass:"col-xl-3 col-md-6 mb-4"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState.dashboard,expression:"loadingState.dashboard"}],staticClass:"card border-left-warning shadow h-100 py-2"},[t._m(3)])]),e("div",{staticClass:"col-xl-3 col-md-6 mb-4"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState.dashboard,expression:"loadingState.dashboard"}],staticClass:"card border-left-success shadow h-100 py-2 cursor-pointer",on:{click:function(a){return t.$router.push({name:"attendance"})}}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row no-gutters align-items-center"},[e("div",{staticClass:"col mr-2"},[e("div",{staticClass:"text-xs font-weight-bold text-success text-uppercase mb-1"},[t._v("\n                                    Ngày đi làm thực tế\n                                ")]),e("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("\n                                    "+t._s(t.dashboard.work_day)+"\n                                ")])]),t._m(4)])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-8 col-lg-7"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState.attendance,expression:"loadingState.attendance"}],staticClass:"card shadow mb-4"},[e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Chấm công")]),e("div",{staticClass:"dropdown no-arrow"},[t._m(5),e("div",{staticClass:"dropdown-menu dropdown-menu-right shadow animated--fade-in",attrs:{"aria-labelledby":"dropdownMenuLink"}},[e("div",{staticClass:"dropdown-header"},[t._v("Tùy chọn")]),e("button",{staticClass:"dropdown-item",on:{click:function(a){t.dialogVisible.attendance=!0}}},[t._v("Gửi yêu cầu")])])])]),e("div",{staticClass:"card-body text-center",staticStyle:{padding:"3rem"}},[e("h6",[t._v(t._s(t.currentDateTime.format("ddd, DD/MM/YYYY")))]),e("h1",{staticClass:"text-gray-900"},[t._v(t._s(t.currentDateTime.format("HH:mm:ss")))]),e("div",{staticClass:"attendances"},[t.buttonState.btnCheckIn.checked?t._e():e("button",{staticClass:"btn btn-icon-split",class:t.buttonState.btnCheckIn.class,attrs:{disabled:t.buttonState.btnCheckIn.disabled},on:{click:t.checkIn}},[t._m(6),e("span",{staticClass:"text"},[t._v("Check In")])]),t.buttonState.btnCheckIn.checked?e("button",{staticClass:"btn btn-icon-split",class:t.buttonState.btnCheckOut.class,attrs:{disabled:t.buttonState.btnCheckOut.disabled},on:{click:t.checkOut}},[t._m(7),e("span",{staticClass:"text"},[t._v("Check Out")])]):t._e()])])]),t._m(8)]),t._m(9)])]),e("att-request",{attrs:{"dialog-visible":t.dialogVisible.attendance},on:{closeDialog:function(a){t.dialogVisible.attendance=!1},success:t.successAttendanceRequest}})],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-sm-flex align-items-center justify-content-between mb-4"},[e("h1",{staticClass:"h3 mb-0 text-gray-800"},[t._v("Tổng quan")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-body"},[e("div",{staticClass:"row no-gutters align-items-center"},[e("div",{staticClass:"col mr-2"},[e("div",{staticClass:"text-xs font-weight-bold text-primary text-uppercase mb-1"},[t._v("\n                                    Số dự án tham gia\n                                ")]),e("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("\n                                    --\n                                ")])]),e("div",{staticClass:"col-auto"},[e("i",{staticClass:"fas fa-project-diagram fa-2x text-gray-300"})])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-body"},[e("div",{staticClass:"row no-gutters align-items-center"},[e("div",{staticClass:"col mr-2"},[e("div",{staticClass:"text-xs font-weight-bold text-info text-uppercase mb-1"},[t._v("\n                                    Số vấn đề tồn tại\n                                ")]),e("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("\n                                    --\n                                ")])]),e("div",{staticClass:"col-auto"},[e("i",{staticClass:"fas fa-clipboard-list fa-2x text-gray-300"})])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-body"},[e("div",{staticClass:"row no-gutters align-items-center"},[e("div",{staticClass:"col mr-2"},[e("div",{staticClass:"text-xs font-weight-bold text-warning text-uppercase mb-1"},[t._v("\n                                    Giờ làm thêm\n                                ")]),e("div",{staticClass:"h5 mb-0 font-weight-bold text-gray-800"},[t._v("--")])]),e("div",{staticClass:"col-auto"},[e("i",{staticClass:"fas fa-clock fa-2x text-gray-300"})])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-auto"},[e("i",{staticClass:"fas fa-business-time fa-2x text-gray-300"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"dropdown-toggle",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-ellipsis-v fa-sm fa-fw text-gray-400"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"icon text-white-50"},[e("i",{staticClass:"fas fa-check"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"icon text-white-50"},[e("i",{staticClass:"fas fa-check"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card shadow mb-4"},[e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Dự án")])]),e("div",{staticClass:"card-body text-center"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-xl-4 col-lg-5"},[e("div",{staticClass:"card shadow mb-4"},[e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Thông báo")])]),e("div",{staticClass:"card-body"})]),e("div",{staticClass:"card shadow mb-4"},[e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Vấn đề tồn tại")])]),e("div",{staticClass:"card-body"})])])}],i=(e("28a5"),e("7514"),e("cebc")),c=e("c1df"),o=e.n(c),r=e("2ef0"),d=e.n(r),u=e("2f62"),l=e("730a"),h=e("223d"),f={name:"pcm-dashboard-view",data:function(){return{loadingState:{attendance:!1,dashboard:!1},currentDateTime:o()(),buttonState:{btnCheckIn:{class:"btn-success",disabled:!0,checked:!1},btnCheckOut:{class:"btn-info",disabled:!1}},dialogVisible:{attendance:!1},dashboard:{work_day:0}}},components:{"att-request":function(){return e.e("chunk-2d217e00").then(e.bind(null,"c91e"))}},computed:Object(i["a"])({},Object(u["b"])(["getSettings"]),{_:function(){return d.a}}),created:function(){var t=this;this.$emit("activeMenu","dashboard"),this.initAttendance(),setInterval(function(){t.currentDateTime=o()(),"00:00:00"==t.currentDateTime.format("HH:mm:ss")&&(t.buttonState.btnCheckIn.disabled=!0,t.buttonState.btnCheckIn.checked=!1),t.updateAttendance()},1e3),this.loadDashboard()},methods:{loadDashboard:function(){var t=this;t.loadingState.dashboard=!0,h["a"].getMyDashboard(t.$axios,{},function(a){t.loadingState.dashboard=!1,a.status&&(t.dashboard=a.data)},function(a){t.loadingState.dashboard=!1})},updateAttendance:function(){var t=d.a.find(this.getSettings.data,{setting_key:"WORKING_START_TIME"}),a=d.a.find(this.getSettings.data,{setting_key:"CHECK_IN_BEFORE"}),e=d.a.find(this.getSettings.data,{setting_key:"CHECK_IN_AFTER"});if(t&&a&&e&&!this.buttonState.btnCheckIn.checked){var n=o()({hour:t.setting_value.split(":")[0],minute:t.setting_value.split(":")[1]}).subtract(a.setting_value,"minutes"),s=o()({hour:t.setting_value.split(":")[0],minute:t.setting_value.split(":")[1]}),i=o()({hour:t.setting_value.split(":")[0],minute:t.setting_value.split(":")[1]}).add(e.setting_value,"minutes");this.currentDateTime>=n&&(this.buttonState.btnCheckIn.disabled=!1,this.currentDateTime>=s&&this.currentDateTime<=i?this.buttonState.btnCheckIn.class="btn-warning":this.currentDateTime>i?this.buttonState.btnCheckIn.class="btn-danger":this.buttonState.btnCheckIn.class="btn-success")}},initAttendance:function(){var t=this;t.loadingState.attendance=!0,l["a"].getState(t.$axios,function(a){t.loadingState.attendance=!1,a.status&&(t.buttonState.btnCheckIn.checked=a.data.btnCheckIn.checked,t.buttonState.btnCheckOut.disabled=a.data.btnCheckOut.disabled)},function(t){})},checkIn:function(){var t=this;if("btn-danger"==t.buttonState.btnCheckIn.class)t.$prompt("Nhập lý do đến muộn","Cảnh báo !!!",{customClass:"el-promt-error",confirmButtonText:"OK",cancelButtonText:"Cancel",inputValidator:function(t){return!(!t||""==t.trim())||"Bắt buộc nhập"}}).then(function(a){var e=a.value;t.loadingState.attendance=!0;var n={reason_late:e};l["a"].checkIn(t.$axios,n,function(a){t.loadingState.attendance=!1,a.status?(t.showMessage("success","Thành công"),t.buttonState.btnCheckIn.checked=!0):t.showMessage("error",a.error_message)},function(a){t.loadingState.attendance=!1})}).catch(function(){});else{t.loadingState.attendance=!0;var a={};l["a"].checkIn(t.$axios,a,function(a){t.loadingState.attendance=!1,a.status?(t.showMessage("success","Thành công"),t.buttonState.btnCheckIn.checked=!0):t.showMessage("error",a.error_message)},function(a){t.loadingState.attendance=!1})}},checkOut:function(){var t=this,a=d.a.find(this.getSettings.data,{setting_key:"WORKING_END_TIME"}),e=o()({hour:a.setting_value.split(": ")[0],minute:a.setting_value.split(":")[1]});if(t.currentDateTime<e)t.$prompt("Nhập lý do về sớm","Cảnh báo !!!",{customClass:"el-promt-error",confirmButtonText:"OK",cancelButtonText:"Cancel",inputValidator:function(t){return!(!t||""==t.trim())||"Bắt buộc nhập"}}).then(function(a){var e=a.value;t.loadingState.attendance=!0;var n={reason_soon:e};l["a"].checkOut(t.$axios,n,function(a){t.loadingState.attendance=!1,a.status?(t.showMessage("success","Thành công"),t.buttonState.btnCheckOut.disabled=!0,t.dashboard.work_day=a.data.work_day):t.showMessage("error",a.error_message)},function(a){t.loadingState.attendance=!1})}).catch(function(){});else{t.loadingState.attendance=!0;var n={};l["a"].checkOut(t.$axios,n,function(a){t.loadingState.attendance=!1,a.status?(t.showMessage("success","Thành công"),t.buttonState.btnCheckOut.disabled=!0,t.dashboard.work_day=a.data.work_day):t.showMessage("error",a.error_message)},function(a){t.loadingState.attendance=!1})}},successAttendanceRequest:function(t){this.buttonState.btnCheckIn.checked=t.data.btnCheckIn.checked,this.buttonState.btnCheckOut.disabled=t.data.btnCheckOut.disabled,this.dialogVisible.attendance=!1}}},b=f,g=e("2877"),v=Object(g["a"])(b,n,s,!1,null,null,null);a["default"]=v.exports},"268f":function(t,a,e){t.exports=e("fde4")},"32a6":function(t,a,e){var n=e("241e"),s=e("c3a1");e("ce7e")("keys",function(){return function(t){return s(n(t))}})},"730a":function(t,a,e){"use strict";var n="/api/attendances/get-state",s="/api/attendances/check-in",i="/api/attendances/check-out",c="/api/attendances/send-request",o="/api/attendances/get-list",r="/api/attendances/get-report",d="/api/attendances/confirm-request",u={getState:function(t,a,e){t.get(n).then(function(t){var e=t.data;a(e)}).catch(function(t){e(t)})},checkIn:function(t,a,e,n){t.post(s,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},checkOut:function(t,a,e,n){t.post(i,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},sendRequest:function(t,a,e,n){t.post(c,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},confirmRequest:function(t,a,e,n){t.post(d,a).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getList:function(t,a,e,n){var s={params:a};t.get(o,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})},getReport:function(t,a,e,n){var s={params:a};t.get(r,s).then(function(t){var a=t.data;e(a)}).catch(function(t){n(t)})}};a["a"]=u},7514:function(t,a,e){"use strict";var n=e("5ca1"),s=e("0a49")(5),i="find",c=!0;i in[]&&Array(1)[i](function(){c=!1}),n(n.P+n.F*c,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")(i)},"8aae":function(t,a,e){e("32a6"),t.exports=e("584a").Object.keys},a4bb:function(t,a,e){t.exports=e("8aae")},bf90:function(t,a,e){var n=e("36c3"),s=e("bf0b").f;e("ce7e")("getOwnPropertyDescriptor",function(){return function(t,a){return s(n(t),a)}})},ce7e:function(t,a,e){var n=e("63b6"),s=e("584a"),i=e("294c");t.exports=function(t,a){var e=(s.Object||{})[t]||Object[t],c={};c[t]=a(e),n(n.S+n.F*i(function(){e(1)}),"Object",c)}},cebc:function(t,a,e){"use strict";e.d(a,"a",function(){return u});var n=e("268f"),s=e.n(n),i=e("e265"),c=e.n(i),o=e("a4bb"),r=e.n(o),d=e("bd86");function u(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{},n=r()(e);"function"===typeof c.a&&(n=n.concat(c()(e).filter(function(t){return s()(e,t).enumerable}))),n.forEach(function(a){Object(d["a"])(t,a,e[a])})}return t}},e265:function(t,a,e){t.exports=e("ed33")},ed33:function(t,a,e){e("014b"),t.exports=e("584a").Object.getOwnPropertySymbols},fde4:function(t,a,e){e("bf90");var n=e("584a").Object;t.exports=function(t,a){return n.getOwnPropertyDescriptor(t,a)}}}]);
//# sourceMappingURL=chunk-38c74460.069ef013.js.map