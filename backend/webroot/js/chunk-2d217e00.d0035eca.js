(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217e00"],{c91e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"pcm-attendance-request-component"}},[a("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.submitRequestAttendance(e)}}},[a("el-dialog",{attrs:{title:"Yêu cầu chấm công","custom-class":"el-dialog-body-gray",visible:t.dialogVisible,width:"500px"},on:{close:function(e){return t.$emit("closeDialog")}}},[a("div",{staticClass:"row form-group"},[a("div",{staticClass:"col-sm-12"},[a("label",{staticClass:"required"},[t._v("Check In / Out")]),a("div",[a("el-date-picker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("check_date")},attrs:{"data-vv-name":"check_date","data-vv-as":"Check-Date",type:"datetimerange",size:"small","start-placeholder":"Check In","end-placeholder":"Check Out","time-arrow-control":"",format:"dd/MM/yyyy HH:mm","value-format":"yyyy-MM-dd HH:mm","default-time":[t._.find(this.getSettings.data,{setting_key:"WORKING_START_TIME"}).setting_value+":00",t._.find(this.getSettings.data,{setting_key:"WORKING_END_TIME"}).setting_value+":00"]},model:{value:t.form.attendance.check_date,callback:function(e){t.$set(t.form.attendance,"check_date",e)},expression:"form.attendance.check_date"}})],1)])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"required"},[t._v("Lý do")]),a("div",[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("note")},attrs:{type:"textarea",autosize:"",placeholder:"Nhập lý do","data-vv-name":"note","data-vv-as":"Lý do"},model:{value:t.form.attendance.note,callback:function(e){t.$set(t.form.attendance,"note",e)},expression:"form.attendance.note"}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{"native-type":"submit",type:"primary",size:"small",icon:"el-icon-s-promotion",loading:t.loadingState.attendance}},[t._v("Gửi yêu cầu")])],1)])],1)])},i=[],s=(a("7514"),a("cebc")),c=a("c1df"),o=a.n(c),d=a("2ef0"),r=a.n(d),l=a("2f62"),u=a("730a"),m={name:"pcm-attendance-request-component",props:["dialogVisible","initData"],data:function(){return{loadingState:{attendance:!1},form:{attendance:{check_date:[],note:""}}}},computed:Object(s["a"])({},Object(l["b"])(["getSettings"]),{_:function(){return r.a}}),watch:{initData:function(){this.initData&&(this.initData.id>0?this.form.attendance.check_date=[o()(this.initData.check_in).format("YYYY-MM-DD HH:mm"),this.initData.check_date+" "+r.a.find(this.getSettings.data,{setting_key:"WORKING_END_TIME"}).setting_value]:this.form.attendance.check_date=[this.initData.check_date+" "+r.a.find(this.getSettings.data,{setting_key:"WORKING_START_TIME"}).setting_value,this.initData.check_date+" "+r.a.find(this.getSettings.data,{setting_key:"WORKING_END_TIME"}).setting_value])}},created:function(){},methods:{submitRequestAttendance:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){t.loadingState.attendance=!0;var a={check_in:o()(t.form.attendance.check_date[0]).unix(),check_out:o()(t.form.attendance.check_date[1]).unix(),note:t.form.attendance.note};u["a"].sendRequest(t.$axios,a,function(e){t.loadingState.attendance=!1,e.status?(t.showMessage("success","Gửi yêu cầu thành công"),t.form.attendance={check_in:"",check_out:"",note:""},t.$emit("success",e)):t.showMessage("error",e.error_message)},function(e){t.loadingState.attendance=!1})}})}}},h=m,f=a("2877"),v=Object(f["a"])(h,n,i,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d217e00.d0035eca.js.map