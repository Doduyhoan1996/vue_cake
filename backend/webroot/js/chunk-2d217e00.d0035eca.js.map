{"version":3,"sources":["webpack:///./src/components/attendance/Request.vue?2cfb","webpack:///src/components/attendance/Request.vue","webpack:///./src/components/attendance/Request.vue?6bc4","webpack:///./src/components/attendance/Request.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","role","on","submit","$event","preventDefault","submitRequestAttendance","title","custom-class","visible","dialogVisible","width","close","$emit","staticClass","_v","directives","name","rawName","value","expression","class","is-invalid","errors","has","data-vv-name","data-vv-as","type","size","start-placeholder","end-placeholder","time-arrow-control","format","value-format","default-time","_","find","getSettings","data","setting_key","setting_value","model","form","attendance","callback","$$v","$set","autosize","placeholder","slot","native-type","icon","loading","loadingState","staticRenderFns","Requestvue_type_script_lang_js_","props","check_date","note","computed","Object","objectSpread","vuex_esm","lodash_default","a","watch","initData","moment_default","check_in","created","methods","self","$validator","validateAll","then","result","unix","check_out","sendRequest","$axios","status","showMessage","error_message","error","attendance_Requestvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d217e00.d0035eca.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"pcm-attendance-request-component\"}},[_c('form',{attrs:{\"role\":\"form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submitRequestAttendance($event)}}},[_c('el-dialog',{attrs:{\"title\":\"Yêu cầu chấm công\",\"custom-class\":\"el-dialog-body-gray\",\"visible\":_vm.dialogVisible,\"width\":\"500px\"},on:{\"close\":function($event){return _vm.$emit('closeDialog')}}},[_c('div',{staticClass:\"row form-group\"},[_c('div',{staticClass:\"col-sm-12\"},[_c('label',{staticClass:\"required\"},[_vm._v(\"Check In / Out\")]),_c('div',[_c('el-date-picker',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],class:{'is-invalid': _vm.errors.has('check_date')},attrs:{\"data-vv-name\":\"check_date\",\"data-vv-as\":\"Check-Date\",\"type\":\"datetimerange\",\"size\":\"small\",\"start-placeholder\":\"Check In\",\"end-placeholder\":\"Check Out\",\"time-arrow-control\":\"\",\"format\":\"dd/MM/yyyy HH:mm\",\"value-format\":\"yyyy-MM-dd HH:mm\",\"default-time\":[_vm._.find(this.getSettings.data, {'setting_key': 'WORKING_START_TIME'}).setting_value + ':00', _vm._.find(this.getSettings.data, {'setting_key': 'WORKING_END_TIME'}).setting_value + ':00']},model:{value:(_vm.form.attendance.check_date),callback:function ($$v) {_vm.$set(_vm.form.attendance, \"check_date\", $$v)},expression:\"form.attendance.check_date\"}})],1)])]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"required\"},[_vm._v(\"Lý do\")]),_c('div',[_c('el-input',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],class:{'is-invalid': _vm.errors.has('note')},attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"Nhập lý do\",\"data-vv-name\":\"note\",\"data-vv-as\":\"Lý do\"},model:{value:(_vm.form.attendance.note),callback:function ($$v) {_vm.$set(_vm.form.attendance, \"note\", $$v)},expression:\"form.attendance.note\"}})],1)]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"native-type\":\"submit\",\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-s-promotion\",\"loading\":_vm.loadingState.attendance}},[_vm._v(\"Gửi yêu cầu\")])],1)])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"pcm-attendance-request-component\">\r\n        <!-- Dialog - Attendance -->\r\n        <form role=\"form\" @submit.prevent=\"submitRequestAttendance\">\r\n            <el-dialog title=\"Yêu cầu chấm công\"\r\n                custom-class=\"el-dialog-body-gray\" \r\n                :visible=\"dialogVisible\" \r\n                width=\"500px\"\r\n                @close=\"$emit('closeDialog')\"\r\n            >\r\n                <div class=\"row form-group\">\r\n                    <div class=\"col-sm-12\">\r\n                        <label class=\"required\">Check In / Out</label>\r\n                        <div>\r\n                            <el-date-picker \r\n                                v-model=\"form.attendance.check_date\"\r\n                                v-validate=\"'required'\" \r\n                                data-vv-name=\"check_date\"\r\n                                data-vv-as=\"Check-Date\"  \r\n                                type=\"datetimerange\"\r\n                                size=\"small\" \r\n                                start-placeholder=\"Check In\"\r\n                                end-placeholder=\"Check Out\"\r\n                                time-arrow-control\r\n                                format=\"dd/MM/yyyy HH:mm\"\r\n                                value-format=\"yyyy-MM-dd HH:mm\"\r\n                                :class=\"{'is-invalid': errors.has('check_date')}\"\r\n                                :default-time=\"[_.find(this.getSettings.data, {'setting_key': 'WORKING_START_TIME'}).setting_value + ':00', _.find(this.getSettings.data, {'setting_key': 'WORKING_END_TIME'}).setting_value + ':00']\"\r\n                                >\r\n                            </el-date-picker>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"form-group\">\r\n                    <label class=\"required\">Lý do</label>\r\n                    <div>\r\n                        <el-input :class=\"{'is-invalid': errors.has('note')}\" type=\"textarea\" autosize placeholder=\"Nhập lý do\" v-model=\"form.attendance.note\" v-validate=\"'required'\" data-vv-name=\"note\" data-vv-as=\"Lý do\"></el-input>\r\n                    </div>\r\n                </div>\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button native-type=\"submit\" type=\"primary\" size=\"small\" icon=\"el-icon-s-promotion\" :loading=\"loadingState.attendance\">Gửi yêu cầu</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport _ from 'lodash'\r\nimport {\r\n    mapGetters\r\n} from 'vuex'\r\n\r\n//API\r\nimport API_ATTENDANCE from '@/utils/api/attendance'\r\nexport default {\r\n    name: 'pcm-attendance-request-component',\r\n    props: ['dialogVisible', 'initData'],\r\n    data() {\r\n        return {\r\n            loadingState: {\r\n                attendance: false\r\n            },\r\n            form: {\r\n                attendance: {\r\n                    check_date: [],\r\n                    note: ''\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'getSettings'\r\n        ]),\r\n        _() {\r\n            return _\r\n        }\r\n    },\r\n    watch: {\r\n        initData: function() {\r\n            if (this.initData) {\r\n                if (this.initData.id > 0) {\r\n                    this.form.attendance.check_date = [\r\n                        moment(this.initData.check_in).format('YYYY-MM-DD HH:mm'),\r\n                        this.initData.check_date + ' ' + _.find(this.getSettings.data, {'setting_key': 'WORKING_END_TIME'}).setting_value\r\n                    ]\r\n                } else {\r\n                    this.form.attendance.check_date = [\r\n                        this.initData.check_date + ' ' + _.find(this.getSettings.data, {'setting_key': 'WORKING_START_TIME'}).setting_value,\r\n                        this.initData.check_date + ' ' + _.find(this.getSettings.data, {'setting_key': 'WORKING_END_TIME'}).setting_value\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        \r\n    },\r\n    methods: {\r\n        submitRequestAttendance() {\r\n            let self = this\r\n            this.$validator.validateAll().then((result) => {\r\n                if (result) {\r\n                    self.loadingState.attendance = true\r\n                    let form = {\r\n                        check_in: moment(self.form.attendance.check_date[0]).unix(),\r\n                        check_out: moment(self.form.attendance.check_date[1]).unix(),\r\n                        note: self.form.attendance.note\r\n                    }\r\n                    API_ATTENDANCE.sendRequest(self.$axios, form, function(data) {\r\n                        self.loadingState.attendance = false\r\n                        if (data.status) {\r\n                            self.showMessage('success', 'Gửi yêu cầu thành công')\r\n                            self.form.attendance = {\r\n                                check_in: '',\r\n                                check_out: '',\r\n                                note: ''\r\n                            }\r\n                            self.$emit('success', data)\r\n                        } else {\r\n                            self.showMessage('error', data.error_message)\r\n                        }\r\n                    }, function(error) {\r\n                        self.loadingState.attendance = false\r\n                    }) \r\n                }\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Request.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Request.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Request.vue?vue&type=template&id=429b51b8&\"\nimport script from \"./Request.vue?vue&type=script&lang=js&\"\nexport * from \"./Request.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}